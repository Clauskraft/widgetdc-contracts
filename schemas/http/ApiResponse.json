{
  "$id": "ApiResponse",
  "description": "Standard API response envelope.",
  "type": "object",
  "required": [
    "success"
  ],
  "properties": {
    "success": {
      "type": "boolean"
    },
    "data": {},
    "error": {
      "type": "object",
      "required": [
        "code",
        "message",
        "status_code"
      ],
      "properties": {
        "code": {
          "anyOf": [
            {
              "const": "VALIDATION_ERROR",
              "type": "string"
            },
            {
              "const": "AUTH_ERROR",
              "type": "string"
            },
            {
              "const": "NOT_FOUND",
              "type": "string"
            },
            {
              "const": "RATE_LIMIT",
              "type": "string"
            },
            {
              "const": "INTERNAL_ERROR",
              "type": "string"
            },
            {
              "const": "TIMEOUT",
              "type": "string"
            },
            {
              "const": "SERVICE_UNAVAILABLE",
              "type": "string"
            }
          ]
        },
        "message": {
          "type": "string"
        },
        "status_code": {
          "minimum": 400,
          "maximum": 599,
          "type": "integer"
        },
        "details": {
          "type": "object",
          "patternProperties": {
            "^(.*)$": {}
          }
        },
        "correlation_id": {
          "type": "string"
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "request_id": {
          "type": "string"
        },
        "timestamp": {
          "format": "date-time",
          "type": "string"
        },
        "duration_ms": {
          "minimum": 0,
          "type": "integer"
        },
        "correlation_id": {
          "type": "string"
        }
      }
    }
  }
}
